<section class="hero">
  <div class="hero-overlay">
    <h1 class="hero-title">¿A dónde te gustaría viajar?</h1>
    <form action="/search" method="GET" class="search-bar">
      <input
        type="text"
        name="query"
        placeholder="Conocé nuestras opciones..."
        value="{{query}}"
        required
      />
      <button type="submit">Buscar</button>
    </form>
  </div>
</section>

<h1 class="section-title">Nuestras Propiedades</h1>

<!-- Filtro y orden -->
<form method="GET" action="/products" class="filter-form" style="max-width: 400px; margin: 0 auto 2rem;">
  <input
    type="text"
    name="query"
    placeholder="Buscar por categoría o 'available'"
    value="{{query}}"
    style="padding: 10px 15px; border-radius: 50px; border: 1px solid #e2e8f0; width: 65%; margin-right: 0.5rem;"
  />

  <select name="sort" style="padding: 10px 15px; border-radius: 50px; border: 1px solid #e2e8f0; width: 30%;">
    <option value="">Ordenar por precio</option>
    <option value="asc" {{#if (eq sort 'asc')}}selected{{/if}}>Ascendente</option>
    <option value="desc" {{#if (eq sort 'desc')}}selected{{/if}}>Descendente</option>
  </select>

  <button
    type="submit"
    style="padding: 10px 20px; background-color: #ff6b6b; color: white; border: none; border-radius: 50px; cursor: pointer; margin-left: 10px;"
  >
    Filtrar
  </button>
</form>

<!-- Productos -->
<div class="product-grid">
  {{#each products}}
    <div class="product-card">
      {{#if this.thumbnails.length}}
        <img src="{{this.thumbnails.[0]}}" alt="{{this.title}}" />
      {{else}}
        <img src="/img/default-product.png" alt="Sin imagen disponible" />
      {{/if}}
      <div class="product-details">
        <h3>{{this.title}}</h3>
        <p class="description">{{this.description}}</p>
        <p class="price">Precio: <strong>${{this.price}}</strong></p>
        <p class="stock">Habitaciones disponibles: <strong>{{this.stock}}</strong></p>
        <button class="reserve-btn" onclick="addToCart('{{this._id}}')">Reservar</button>
      </div>
    </div>
  {{/each}}
</div>

<!-- Paginación -->
<div class="pagination" style="text-align: center; margin: 2rem 0;">
  {{#if pagination.hasPrevPage}}
    <a href="{{pagination.prevLink}}" class="pagination-link" style="margin-right: 1rem;">Anterior</a>
  {{/if}}

  <span>Página {{pagination.page}} de {{pagination.totalPages}}</span>

  {{#if pagination.hasNextPage}}
    <a href="{{pagination.nextLink}}" class="pagination-link" style="margin-left: 1rem;">Siguiente</a>
  {{/if}}
</div>
