<h1>Listado de Productos</h1>

<!-- Filtro y orden -->
<form method="GET" action="/products">
  <input type="text" name="query" placeholder="Buscar por categoría o 'available'" value="{{query}}" />
  
  <select name="sort">
    <option value="">Ordenar por precio</option>
    <option value="asc" {{#if (eq sort 'asc')}}selected{{/if}}>Ascendente</option>
    <option value="desc" {{#if (eq sort 'desc')}}selected{{/if}}>Descendente</option>
  </select>
  
  <button type="submit">Filtrar</button>
</form>

<!-- Productos -->
<div class="product-grid">
  {{#each products}}
    <div class="product-card">
      {{#if this.thumbnails.length}}
        <img src="{{this.thumbnails.[0]}}" alt="{{this.title}}" />
      {{else}}
        <img src="/img/default-product.png" alt="Sin imagen" />
      {{/if}}
      <h3><a href="/products/{{this._id}}">{{this.title}}</a></h3>
      <p>Precio: ${{this.price}}</p>
      <p>Stock: {{this.stock}}</p>
    </div>
  {{/each}}
</div>

<!-- Paginación -->
<div class="pagination">
  {{#if pagination.hasPrevPage}}
    <a href="{{pagination.prevLink}}">Anterior</a>
  {{/if}}
  
  <span>Página {{pagination.page}} de {{pagination.totalPages}}</span>
  
  {{#if pagination.hasNextPage}}
    <a href="{{pagination.nextLink}}">Siguiente</a>
  {{/if}}
</div>
